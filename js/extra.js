// Config images
// $("#Fig5").attr("width","550")

// Tooltip

$(document).ready(function(){
    $('[data-toggle="tooltip"]').tooltip(); 
  });

// Buttons

$(".button1").click(function(){
    var elements = document.getElementsByClassName("button1")
    for (i = 0; i < elements.length; i++) {
        elements[i].classList.remove("buttonactive")
    }
    // $(".button1").toggleClass("buttonactive")
    this.classList.add("buttonactive")
})

$(".button2").click(function(){
    var elements = document.getElementsByClassName("button2")
    for (i = 0; i < elements.length; i++) {
        elements[i].classList.remove("buttonactive")
    }
    // $(".button1").toggleClass("buttonactive")
    this.classList.add("buttonactive")
})

// Figure 2

$('.button1').on('click',function(e){
    e.preventDefault();

    var priornumber = $(this).data('src');

    $("#Fig2").attr("src","../figure/"+priornumber+".png");

});





// Figure 4

// log scale button
// Initialise global imgSRC and kic
var imgSRC="norm"
var kic = -775

$('.button2').on('click',function(e){
    e.preventDefault();

    window.imgSRC = $(this).data('src');

    $("#Fig5").attr("src","../figure/"+kic+"_fitting"+imgSRC+".png");

});



// Figure 4



var myPlot = document.getElementById('Fig4'),
    hoverInfo = document.getElementById('hoverinfo'), 
    x = [2.160804097435175,99.59105581492804,-454.32875784622956,262.99864473727393,-30.835216995520113,-414.4517846515355,-27.476271594372065,-50.71991479741337,-4.222668562423678,80.67644996616946,-5.322003511514595,-77.01846265388349,-730.4586069680117,0.017608383880087786,-275.63133600908077,-1.458201980877675,-18.64694630360782,-408.3259552394002,-417.11114952206117,59.95531812529043,-14.004003184047178,-222.02713486221182,1.0480157501206122,-6.542305794203912,1.0572405039315527,-188.47418401602317,-406.0207100329835,-498.1338183586495,-6.124955512182623,48.859645823031315,-603.275631304432,-26.63188294470956,300.4338094096129,-16.828775675568068,-1.008921012279643,3.653052296656824,0.3399893399391658,-91.06096391599431,-11.454113813508911,-401.24456084565554,-3.3422929105636285,-20.643014379257693,92.25603113391116,-514.3265694129368,-349.04340637084897,1.405027102792701,112.09287475917063,-371.9734299531274,28.422451137435473,-18.796967972866696,-11.384912912213622,5.592875836128542,-14.18904638326535,-261.8947123948228,-346.4318785282612,4.258203568789213,-371.9379851425292,17.436802582144082,-43.200295559905044,113.81396500597111,-326.1308251708251,-11.040018473066539,-73.03787487781392,7.540592719874439,-69.72376100821066,-8.191395310893768,-34.145122994872054,-271.8728787064056,-26.38348463800503,-10.53939301747505,42.0792229463018,-348.60048625609943,31.996423463858264,-438.9861718559023,-108.53814588776004,50.601768682981856,13.252617834230477,-17.292804768015685,-514.058421182488,-9.62089678871098,-50.793535304199395,-380.2559842311084,-13.722208857682745,-17.484794188825617,-18.053453823189557,-484.7075305415656,163.26954635149923,61.90847432840201,-24.940116966095047,44.57905444935204,-10.596464283694331,-553.3759137933175,-17.603266629220343,-14.0438739260062,-13.816663956644334,-555.4518650064529,-457.9179183091346,-335.5064716726938,107.33048552439686,0.15387715574979666,0.7050813642126741,-267.85981037605416,-48.30130165127048,-275.4089980916351,-624.074999096817,-297.15584112226134,2.8713264802481717,-365.71159050520055,0.7367399012591704,-15.444385989061175,-516.9327141888243,-329.38057746845516,-608.7922458616467,-14.513184965397159,-495.3728886053432,-38.16307619324607,1.9774094771282762,138.21800525027356,31.246878335210567,-2.409312009362111,-364.45054024283854,-282.85652070289507,-1.1339219018768745,34.80496801532081,66.9011112975395,-193.5107677179676,-1.4122993057417261,-7.580516465277924,-3.1643055479514715,-299.79422946747945,NaN,57.2627641995914,-6.287651758632364,58.66705275692311,-47.2850092625049,-16.54515211038415,-33.47549045756705,-2.7329175658342137,-65.41425849386542,57.89008477966263,-131.68806947238227,-331.58897496237023,1.4106804034781817,-8.942776154503008,2.602364174777904,NaN,30.18234881339322,-0.8557129962127874,205.59368660503696,-9.643134104620003,-32.074968544691274,2.925324044759691,-149.4759690765104,50.9113426155709,-306.6666776636357,-3.555099237921695,-28.9130924868864,-40.66720456323219,-4.857780867755082,17.716341613898294,0.6269412797973928,6.510136272352611,-352.3830483596412,3.606002704110324,-2.197884098832219,-387.5929404107201,-386.82300809270055,79.15606458470666,-96.44804935315733,-202.2180516218259,-11.129635708861315,73.08573770779003,-21.38481556236843,108.2874429738149,-4.036740895483945,-2.7857457760865145,-235.76448112560865,-299.7262806573308,-13.316822828937347,-4.110263816771749,243.94763559014154,-14.415454752704136,0.9780493963107801,-18.602709167355897,-5.585673183081781,-5.027066710021245,-18.733959494253668,-404.4560353588331,-15.671462473248539,-227.47752937170117,-32.45643662452244,-12.990900786941438,-1.3575331740994443,-285.1260874431973,5.85132035386232,-273.37989742769423,-2.4744074327236376,152.16277881428505,25.22195373838258,50.59431883072284,2.089832174417097,-464.8957320374402,-534.8090357020747,-298.17119974732213,-5.167922804564114,16.919395510759387,-5.551504317451418,-4.064171958621046,43.6064751155327,-242.77625188191178,188.06247621079274,-208.04000884678499,-13.125641314057475,-10.098272681077106,6.8329622474989264,-17.201408140907006,-419.206829068974,-72.43238855675327,-327.3304317658667,-3.6549189091706467,-28.71171692348662,5.9198985942812214,106.96577889230957,-2.6572518907482845,-379.659785718256,-94.11262553711094,-323.8072515040003,86.29986419180659,-407.17524675907316,-243.65546467191052,2.4671154311163264,-23.197395323198634,-619.0688875790765,74.15475199788034,-22.395546978913444,-0.3972013556372076,-61.080623810533325,-155.10018553298596,2.184442870345265,-49.26256687099817,-1.1685028906185835,-6.9752472488480635,-7.725362097371544,-5.042488981615861,-20.94365187074891,-364.778938329473,-333.2651757668118,89.33581996677913,-246.38471007103226,-522.2426045758803,-14.842363505977119,130.35264495718275,-100.93705701267572,-73.62830373135694,-11.236194207424887,101.20720423921375,-17.751148801,-13.392508953436845,88.97826452308254,-761.4373290538351,-575.7571978226279,-31.232904579112983];


var trace = {
    x: x,
    autobinx: false,
    type: 'histogram',
    xbins: {
        end: 400, 
        size: 50, 
        start: -900
      }
};
var histdata = [trace];

var layout = {
    // width: 550,
    height: 400,
    autosize: true,
    margin: {t: 50, b: 50, l: 50, r: 50}, 
    xaxis: {title: "KIC difference"}, 
    yaxis: {title: "Count"}

}

Plotly.newPlot('Fig4', histdata, layout, {});

// Figure 5

myPlot.on('plotly_hover', function(e){
    if (e.points[0].y>0){
        $("#Fig5").attr("src","../figure/"+e.points[0].x+"_fitting"+imgSRC+".png");

        kic=e.points[0].x

        // hoverInfo.innerHTML = kic
        
    }
})
 .on('plotly_unhover', function(histdata){
    // hoverInfo.innerHTML = '';
});


// Figure 5

$(document).ready(function(){
    $('img')
      .wrap('<span style="display:inline-block"></span>')
      .css('display', 'block')
      .parent()
      .zoom();
  });